<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
		<link rel="stylesheet" href="style.css" />
		<script
			src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
			integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
			crossorigin="anonymous"
			referrerpolicy="no-referrer"
		></script>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
			crossorigin="anonymous"
		/>
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
			crossorigin="anonymous"
		></script>
	</head>
	<body>
		<div class="entire">
			<button
				type="button"
				class="btn btn-outline-primary btn-lg"
				style="color: #6091d3; background-color: white"
			>
				validate
			</button>
			<table class="main"></table>
		</div>
	</body>
	<script>
		let data = new Array();
		let newData = new Array();
		const set = () => {
			// create a 3D array
			for (let i = 0; i < data.length; i++) {
				const newArray = new Array();
				for (let j = 0; j < data[i].length; j += 3) {
					newArray.push([data[i][j], data[i][j + 1], data[i][j + 2]]);
				}
				newData.push(newArray);
			}
			// console.log(newData);
			const main = document.querySelector('.main');
			// create tr and input
			for (let i = 0; i < 9; i++) {
				let tr = document.createElement('tr');
				for (let j = 0; j < 9; j++) {
					let inp = document.createElement('input');
					inp.type = 'number';
					tr.appendChild(inp);
				}
				main.appendChild(tr);
			}
			// set default value and disable the input
			for (let i = 0; i < newData.length; i++) {
				for (let j = 0; j < newData[i].length; j++) {
					if (i === 0) {
						$('tr')
							.eq(newData[i][j][1] - 1)
							.children('input')
							.eq(newData[i][j][0] - 1)
							.val(newData[i][j][2]);
						$('tr')
							.eq(newData[i][j][1] - 1)
							.children('input')
							.eq(newData[i][j][0] - 1)
							.attr('disabled', true);
					}
					if (i === 1) {
						$('tr')
							.eq(newData[i][j][1] - 1)
							.children('input')
							.eq(newData[i][j][0] + 2)
							.val(newData[i][j][2]);
						$('tr')
							.eq(newData[i][j][1] - 1)
							.children('input')
							.eq(newData[i][j][0] + 2)
							.attr('disabled', true);
					}
					if (i === 2) {
						$('tr')
							.eq(newData[i][j][1] - 1)
							.children('input')
							.eq(newData[i][j][0] + 5)
							.val(newData[i][j][2]);
						$('tr')
							.eq(newData[i][j][1] - 1)
							.children('input')
							.eq(newData[i][j][0] + 5)
							.attr('disabled', true);
					}
					if (i === 3) {
						$('tr')
							.eq(newData[i][j][1] + 2)
							.children('input')
							.eq(newData[i][j][0] - 1)
							.val(newData[i][j][2]);
						$('tr')
							.eq(newData[i][j][1] + 2)
							.children('input')
							.eq(newData[i][j][0] - 1)
							.attr('disabled', true);
					}
					if (i === 4) {
						$('tr')
							.eq(newData[i][j][1] + 2)
							.children('input')
							.eq(newData[i][j][0] + 2)
							.val(newData[i][j][2]);
						$('tr')
							.eq(newData[i][j][1] + 2)
							.children('input')
							.eq(newData[i][j][0] + 2)
							.attr('disabled', true);
					}
					if (i === 5) {
						$('tr')
							.eq(newData[i][j][1] + 2)
							.children('input')
							.eq(newData[i][j][0] + 5)
							.val(newData[i][j][2]);
						$('tr')
							.eq(newData[i][j][1] + 2)
							.children('input')
							.eq(newData[i][j][0] + 5)
							.attr('disabled', true);
					}
					if (i === 6) {
						$('tr')
							.eq(newData[i][j][1] + 5)
							.children('input')
							.eq(newData[i][j][0] - 1)
							.val(newData[i][j][2]);
						$('tr')
							.eq(newData[i][j][1] + 5)
							.children('input')
							.eq(newData[i][j][0] - 1)
							.attr('disabled', true);
					}
					if (i === 7) {
						$('tr')
							.eq(newData[i][j][1] + 5)
							.children('input')
							.eq(newData[i][j][0] + 2)
							.val(newData[i][j][2]);
						$('tr')
							.eq(newData[i][j][1] + 5)
							.children('input')
							.eq(newData[i][j][0] + 2)
							.attr('disabled', true);
					}
					if (i === 8) {
						$('tr')
							.eq(newData[i][j][1] + 5)
							.children('input')
							.eq(newData[i][j][0] + 5)
							.val(newData[i][j][2]);
						$('tr')
							.eq(newData[i][j][1] + 5)
							.children('input')
							.eq(newData[i][j][0] + 5)
							.attr('disabled', true);
					}
				}
			}
		};

		const isCorrect = () => {};

		const validateSudoku = () => {
			$('input:not(:disabled)').each(function () {
				let sudokuVal = $(this).val();

				if (isNaN(sudokuVal) || sudokuVal == '') {
					// if sudokuVal is NOT number or empty
					return false;
				}
			});
			return true;
		};

		$('button').on('click', () => {
			// console.log(validateSudoku());
			if (validateSudoku()) {
				alert('All the cells are filled.');
			} else {
				alert('There are empty cells or non-numerical cells.');
			}
		});

		const httpReq = new XMLHttpRequest();
		httpReq.onload = () => {
			if (httpReq.status == 200) {
				for (let obj of JSON.parse(httpReq.response)) {
					const value = Array.from(obj.val, Number);
					data.push(value);
				}
				set();
			}
			// console.log(httpReq.status);
		};
		httpReq.open('GET', 'MOCK_DATA.json', true);
		httpReq.send();
	</script>
</html>
